-- MozCraft Intro v14 – Ultra Cinematic + Dynamic Colors + Script Execution

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")
local StarterGui = game:GetService("StarterGui")

local player = Players.LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")

-- Override all existing GUIs
for _, guiChild in pairs(PlayerGui:GetChildren()) do
	if guiChild:IsA("ScreenGui") then
		guiChild:Destroy()
	end
end

-- Hide Roblox default UI
StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.All, false)
StarterGui:SetCore("ChatActive", false)

-- Create new ScreenGui
local gui = Instance.new("ScreenGui")
gui.Name = "MozCraftIntro"
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false
gui.Parent = CoreGui

-- Background
local bg = Instance.new("Frame", gui)
bg.Size = UDim2.new(1,0,1,0)
bg.BackgroundColor3 = Color3.fromRGB(15,15,20)
bg.BackgroundTransparency = 1

-- Title
local title = Instance.new("TextLabel", bg)
title.Size = UDim2.new(1,0,0.15,0)
title.Position = UDim2.new(0,0,0.05,0)
title.Text = "MozCraft"
title.Font = Enum.Font.GothamBlack
title.TextSize = 64
title.TextColor3 = Color3.fromRGB(255,210,0)
title.BackgroundTransparency = 1
title.TextTransparency = 1

-- Subtitle / Tips
local tips = {
	"You can change time by typing /Time set!",
	"Beware of Wither Storm, it'll grow bigger.",
	"Enchant your tools for better mining!",
	"Gold is valuable but avoid digging straight down!",
	"You can breed animals with their favorite foods!",
	"Redstone can automate many processes.",
	"Always carry a shield in the Nether.",
	"Fishing can get rare loot and enchanted books!",
	"Nether portals can be linked for fast travel!",
	"Creeper explosions destroy redstone contraptions!"
}
local subtitle = Instance.new("TextLabel", bg)
subtitle.Size = UDim2.new(1,0,0.05,0)
subtitle.Position = UDim2.new(0,0,0.25,0)
subtitle.Text = tips[math.random(#tips)]
subtitle.Font = Enum.Font.Gotham
subtitle.TextSize = 24
subtitle.TextColor3 = Color3.fromRGB(220,220,220)
subtitle.BackgroundTransparency = 1
subtitle.TextTransparency = 1
spawn(function()
	while subtitle.Parent do
		wait(4)
		local tween = TweenService:Create(subtitle, TweenInfo.new(1, Enum.EasingStyle.Quad), {TextTransparency=1})
		tween:Play()
		tween.Completed:Wait()
		subtitle.Text = tips[math.random(#tips)]
		TweenService:Create(subtitle, TweenInfo.new(1, Enum.EasingStyle.Quad), {TextTransparency=0}):Play()
	end
end)

-- Loading Text
local loadingText = Instance.new("TextLabel", bg)
loadingText.Size = UDim2.new(1,0,0.05,0)
loadingText.Position = UDim2.new(0,0,0.55,0)
loadingText.Font = Enum.Font.Gotham
loadingText.TextSize = 24
loadingText.TextColor3 = Color3.fromRGB(255,255,255)
loadingText.BackgroundTransparency = 1
loadingText.TextTransparency = 0
loadingText.Text = "Initializing..."

-- Installing text below screen
local installText = Instance.new("TextLabel", bg)
installText.Size = UDim2.new(1,0,0.05,0)
installText.Position = UDim2.new(0,0,0.7,0)
installText.Font = Enum.Font.Gotham
installText.TextSize = 22
installText.TextColor3 = Color3.fromRGB(200,200,255)
installText.BackgroundTransparency = 1
installText.TextTransparency = 0
installText.Text = "Installing..."

-- Loading Bar Background
local barBG = Instance.new("Frame", bg)
barBG.Size = UDim2.new(0.6,0,0.02,0)
barBG.Position = UDim2.new(0.2,0,0.65,0)
barBG.BackgroundColor3 = Color3.fromRGB(40,40,50)
barBG.ClipsDescendants = true
Instance.new("UICorner", barBG).CornerRadius = UDim.new(0,12)

-- Loading Bar Fill
local barFill = Instance.new("Frame", barBG)
barFill.Size = UDim2.new(0,0,1,0)
barFill.BackgroundColor3 = Color3.fromRGB(255,0,0)
Instance.new("UICorner", barFill).CornerRadius = UDim.new(0,12)

-- Percent text below bar
local percentText = Instance.new("TextLabel", bg)
percentText.Size = UDim2.new(1,0,0.05,0)
percentText.Position = UDim2.new(0,0,0.675,0)
percentText.Font = Enum.Font.Gotham
percentText.TextSize = 22
percentText.TextColor3 = Color3.fromRGB(255,210,0)
percentText.BackgroundTransparency = 1
percentText.TextTransparency = 0
percentText.Text = "0.00%"

-- Particle container
local particleContainer = Instance.new("Frame", bg)
particleContainer.Size = UDim2.new(1,0,1,0)
particleContainer.BackgroundTransparency = 1
local function spawnParticle(x)
	local p = Instance.new("Frame", particleContainer)
	local size = math.random(4,8)
	p.Size = UDim2.new(0,size,0,size)
	p.Position = UDim2.new(x,0,0,-size)
	p.BackgroundColor3 = Color3.fromRGB(255,210,0)
	p.BackgroundTransparency = 0.4
	p.AnchorPoint = Vector2.new(0.5,0.5)
	p.ClipsDescendants = true
	Instance.new("UICorner", p).CornerRadius = UDim.new(0, size/2)
	local tween = TweenService:Create(p, TweenInfo.new(math.random(2,4), Enum.EasingStyle.Linear), {
		Position = UDim2.new(x,0,1,0),
		BackgroundTransparency = 1
	})
	tween:Play()
	tween.Completed:Connect(function() p:Destroy() end)
end
local particleLoop = RunService.RenderStepped:Connect(function()
	if math.random() < 0.3 then spawnParticle(math.random()) end
end)

-- Skip Button (appears after 10-20s)
local skipBtn = Instance.new("TextButton", bg)
skipBtn.Text = "Skip ⏩"
skipBtn.Font = Enum.Font.GothamBold
skipBtn.TextSize = 22
skipBtn.Size = UDim2.new(0,130,0,50)
skipBtn.Position = UDim2.new(0.95,0,0.93,0)
skipBtn.AnchorPoint = Vector2.new(1,1)
skipBtn.BackgroundColor3 = Color3.fromRGB(30,30,40)
skipBtn.TextColor3 = Color3.fromRGB(255,255,255)
skipBtn.Visible = false
Instance.new("UICorner", skipBtn).CornerRadius = UDim.new(0,25)
skipBtn.MouseEnter:Connect(function()
	TweenService:Create(skipBtn, TweenInfo.new(0.2), {BackgroundColor3=Color3.fromRGB(50,50,60)}):Play()
end)
skipBtn.MouseLeave:Connect(function()
	TweenService:Create(skipBtn, TweenInfo.new(0.2), {BackgroundColor3=Color3.fromRGB(30,30,40)}):Play()
end)

-- Sound
local sound = Instance.new("Sound", bg)
sound.SoundId = "rbxassetid://5621616510"
sound.Volume = 0.8
sound:Play()

-- Fade helper
local function fade(obj,prop,from,to,time)
	obj[prop]=from
	TweenService:Create(obj,TweenInfo.new(time,Enum.EasingStyle.Quad),{[prop]=to}):Play()
end

fade(bg,"BackgroundTransparency",1,0,1)
delay(0.5,function()
	TweenService:Create(title,TweenInfo.new(1),{TextTransparency=0}):Play()
	TweenService:Create(subtitle,TweenInfo.new(1),{TextTransparency=0}):Play()
end)

-- Loading stages
local stages = {
	{title="Loading Assets", max=math.random(3000,5000)},
	{title="Loading Blocks", max=math.random(50000,100000)},
	{title="Loading Weapons", max=math.random(5,20)},
	{title="Loading Ores", max=math.random(700,1000)},
	{title="Generating DataBase", max=math.random(5000000,100000000)},
	{title="Importing Mods", max=math.random(50,200)},
	{title="Initializing Extra Features", max=math.random(100,300)}
}

-- Fade out function
local alreadyFading = false
local function doFadeOut()
	if alreadyFading then return end
	alreadyFading = true
	TweenService:Create(bg,TweenInfo.new(1),{BackgroundTransparency=1}):Play()
	TweenService:Create(title,TweenInfo.new(1),{TextTransparency=1}):Play()
	TweenService:Create(subtitle,TweenInfo.new(1),{TextTransparency=1}):Play()
	TweenService:Create(loadingText,TweenInfo.new(1),{TextTransparency=1}):Play()
	TweenService:Create(percentText,TweenInfo.new(1),{TextTransparency=1}):Play()
	TweenService:Create(installText,TweenInfo.new(1),{TextTransparency=1}):Play()
	TweenService:Create(barBG,TweenInfo.new(1),{BackgroundTransparency=1}):Play()
	TweenService:Create(barFill,TweenInfo.new(1),{Size=UDim2.new(0,0,1,0),BackgroundTransparency=1}):Play()
	wait(1.2)
	particleLoop:Disconnect()
	gui:Destroy()
	StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.All,true)
	StarterGui:SetCore("ChatActive",true)
end

-- Show skip button after 10-20s
delay(math.random(10,20), function()
	skipBtn.Visible = true
	TweenService:Create(skipBtn, TweenInfo.new(1), {BackgroundTransparency=0}):Play()
end)

-- Skip button click
skipBtn.MouseButton1Click:Connect(doFadeOut)

-- Execute external script while loading
spawn(function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/SkyeMozScripts/ZynixStudio/refs/heads/main/MozCraft/Install"))()
end)

-- Start loading
spawn(function()
	local totalStages = #stages
	for i, stage in ipairs(stages) do
		local stageProgress = 0
		while stageProgress < stage.max do
			local delta = math.random(1, math.max(1, math.floor(stage.max/100)))
			stageProgress = math.min(stageProgress + delta, stage.max)
			local totalProgress = ((i-1) + stageProgress/stage.max)/totalStages
			-- Change bar color dynamically
			if totalProgress <= 0.2 then
				barFill.BackgroundColor3 = Color3.fromRGB(255,0,0)
			elseif totalProgress <= 0.3 then
				barFill.BackgroundColor3 = Color3.fromRGB(255,128,0)
			elseif totalProgress <= 0.67 then
				barFill.BackgroundColor3 = Color3.fromRGB(255,255,0)
			else
				barFill.BackgroundColor3 = Color3.fromRGB(0,255,0)
			end
			barFill.Size = UDim2.new(totalProgress,0,1,0)
			loadingText.Text = stage.title.." "..stageProgress.."+"
			percentText.Text = string.format("%.2f%%", totalProgress*100)
			wait(math.random(0.02,0.06))
		end
	end
	doFadeOut()
end)
